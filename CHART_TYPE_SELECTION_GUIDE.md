# ğŸ“Š HÆ¯á»šNG DáºªN CHá»ŒN LOáº I BIá»‚U Äá»’ Tá»I Æ¯U

## ğŸ¤– AI Tá»± Äá»™ng Chá»n - Báº¡n KhÃ´ng Cáº§n Lo!

AI (Gemini/Claude) **Tá»° Äá»˜NG phÃ¢n tÃ­ch** dá»¯ liá»‡u vÃ  chá»n loáº¡i biá»ƒu Ä‘á»“ phÃ¹ há»£p nháº¥t dá»±a trÃªn:
- Báº£n cháº¥t dá»¯ liá»‡u (so sÃ¡nh, xu hÆ°á»›ng, tá»· lá»‡...)
- Sá»‘ lÆ°á»£ng Ä‘iá»ƒm dá»¯ liá»‡u
- Má»‘i quan há»‡ giá»¯a cÃ¡c biáº¿n

---

## ğŸ“ QUY Táº®C CHá»ŒN BIá»‚U Äá»’

### 1. ğŸ“Š **BAR CHART (Biá»ƒu Ä‘á»“ cá»™t)** - `"bar"`

**Khi nÃ o dÃ¹ng:**
- So sÃ¡nh giá»¯a cÃ¡c má»¥c riÃªng biá»‡t
- Dá»¯ liá»‡u phÃ¢n loáº¡i (categories)
- Nhiá»u items cáº§n so sÃ¡nh vá»›i nhau

**VÃ­ dá»¥ phÃ¹ há»£p:**
```
Doanh thu cÃ¡c chi nhÃ¡nh:
- HÃ  Ná»™i: 500 triá»‡u
- TP.HCM: 650 triá»‡u
- ÄÃ  Náºµng: 320 triá»‡u
- Cáº§n ThÆ¡: 180 triá»‡u
â†’ AI sáº½ táº¡o: BAR CHART
```

```
Sáº£n lÆ°á»£ng bÃ¡n hÃ ng theo sáº£n pháº©m:
- Sáº£n pháº©m A: 1200 Ä‘Æ¡n vá»‹
- Sáº£n pháº©m B: 980 Ä‘Æ¡n vá»‹
- Sáº£n pháº©m C: 1500 Ä‘Æ¡n vá»‹
â†’ AI sáº½ táº¡o: BAR CHART
```

**Táº¡i sao?** Dá»… so sÃ¡nh chiá»u cao cÃ¡c cá»™t â†’ tháº¥y rÃµ item nÃ o cao/tháº¥p nháº¥t

---

### 2. ğŸ“ˆ **LINE CHART (Biá»ƒu Ä‘á»“ Ä‘Æ°á»ng)** - `"line"`

**Khi nÃ o dÃ¹ng:**
- Dá»¯ liá»‡u theo thá»i gian (time series)
- Hiá»ƒn thá»‹ xu hÆ°á»›ng tÄƒng/giáº£m
- Dá»¯ liá»‡u liÃªn tá»¥c

**VÃ­ dá»¥ phÃ¹ há»£p:**
```
TÄƒng trÆ°á»Ÿng doanh thu 2024:
- ThÃ¡ng 1: 100 triá»‡u
- ThÃ¡ng 2: 115 triá»‡u
- ThÃ¡ng 3: 130 triá»‡u
- ThÃ¡ng 4: 125 triá»‡u
- ThÃ¡ng 5: 145 triá»‡u
- ThÃ¡ng 6: 160 triá»‡u
â†’ AI sáº½ táº¡o: LINE CHART
```

```
Nhiá»‡t Ä‘á»™ trung bÃ¬nh cÃ¡c quÃ½:
Q1 2024: 25Â°C
Q2 2024: 28Â°C
Q3 2024: 30Â°C
Q4 2024: 26Â°C
â†’ AI sáº½ táº¡o: LINE CHART
```

**Táº¡i sao?** ÄÆ°á»ng ná»‘i liá»n â†’ tháº¥y rÃµ xu hÆ°á»›ng tÄƒng/giáº£m theo thá»i gian

---

### 3. ğŸ¥§ **PIE CHART (Biá»ƒu Ä‘á»“ trÃ²n)** - `"pie"`

**Khi nÃ o dÃ¹ng:**
- Hiá»ƒn thá»‹ tá»· lá»‡ pháº§n trÄƒm
- Tá»•ng = 100%
- Ãt má»¥c (3-6 má»¥c tá»‘i Ä‘a)
- CÆ¡ cáº¥u, thÃ nh pháº§n

**VÃ­ dá»¥ phÃ¹ há»£p:**
```
CÆ¡ cáº¥u doanh thu theo kÃªnh bÃ¡n:
- Online: 45%
- Cá»­a hÃ ng: 35%
- Äáº¡i lÃ½: 20%
â†’ AI sáº½ táº¡o: PIE CHART
```

```
Thá»‹ pháº§n smartphone Viá»‡t Nam:
- Samsung: 40%
- Apple: 25%
- Oppo: 20%
- Xiaomi: 15%
â†’ AI sáº½ táº¡o: PIE CHART
```

**Táº¡i sao?** HÃ¬nh trÃ²n â†’ tháº¥y rÃµ tá»· lá»‡ pháº§n trÄƒm cá»§a tá»«ng pháº§n so vá»›i tá»•ng thá»ƒ

**âš ï¸ LÆ¯U Ã:** AI chá»‰ táº¡o pie chart khi:
- CÃ¡c giÃ¡ trá»‹ lÃ  % HOáº¶C tá»•ng â‰ˆ 100
- KhÃ´ng quÃ¡ nhiá»u má»¥c (>6 má»¥c sáº½ rá»‘i)

---

### 4. ğŸ”µ **SCATTER PLOT (Biá»ƒu Ä‘á»“ phÃ¢n tÃ¡n)** - `"scatter"`

**Khi nÃ o dÃ¹ng:**
- Má»‘i quan há»‡ giá»¯a 2 biáº¿n sá»‘
- TÃ¬m correlation (tÆ°Æ¡ng quan)
- Dá»¯ liá»‡u cÃ³ 2 trá»¥c (X vÃ  Y)

**VÃ­ dá»¥ phÃ¹ há»£p:**
```
Má»‘i quan há»‡ chi tiÃªu quáº£ng cÃ¡o & doanh thu:
- Chi 10 triá»‡u â†’ Doanh thu 50 triá»‡u
- Chi 20 triá»‡u â†’ Doanh thu 85 triá»‡u
- Chi 30 triá»‡u â†’ Doanh thu 120 triá»‡u
- Chi 40 triá»‡u â†’ Doanh thu 150 triá»‡u
â†’ AI sáº½ táº¡o: SCATTER PLOT
```

```
Tuá»•i nhÃ¢n viÃªn vs NÄƒng suáº¥t:
- 25 tuá»•i: 80 Ä‘iá»ƒm
- 30 tuá»•i: 95 Ä‘iá»ƒm
- 35 tuá»•i: 92 Ä‘iá»ƒm
- 40 tuá»•i: 88 Ä‘iá»ƒm
â†’ AI sáº½ táº¡o: SCATTER PLOT
```

**Táº¡i sao?** CÃ¡c Ä‘iá»ƒm ráº£i rÃ¡c â†’ tháº¥y rÃµ má»‘i quan há»‡ giá»¯a 2 biáº¿n

---

## ğŸ¯ Báº¢NG QUYáº¾T Äá»ŠNH NHANH

| **CÃ¢u há»i dá»¯ liá»‡u** | **Loáº¡i biá»ƒu Ä‘á»“** | **VÃ­ dá»¥** |
|-------------------|----------------|---------|
| So sÃ¡nh giá»¯a cÃ¡c má»¥c? | ğŸ“Š BAR | Doanh thu theo chi nhÃ¡nh |
| Thay Ä‘á»•i theo thá»i gian? | ğŸ“ˆ LINE | TÄƒng trÆ°á»Ÿng theo thÃ¡ng |
| Tá»· lá»‡ % cá»§a tá»«ng pháº§n? | ğŸ¥§ PIE | Thá»‹ pháº§n, cÆ¡ cáº¥u |
| Quan há»‡ 2 biáº¿n sá»‘? | ğŸ”µ SCATTER | Chi phÃ­ vs Hiá»‡u quáº£ |

---

## ğŸ’¡ LOGIC AI CHá»ŒN BIá»‚U Äá»’

### BÆ°á»›c 1: PhÃ¡t hiá»‡n dá»¯ liá»‡u sá»‘
AI quÃ©t text tÃ¬m:
- Sá»‘ + Ä‘Æ¡n vá»‹: `150 triá»‡u`, `45%`, `1200 Ä‘Æ¡n vá»‹`
- Danh sÃ¡ch cÃ³ sá»‘ liá»‡u
- So sÃ¡nh cÃ³ giÃ¡ trá»‹ cá»¥ thá»ƒ

### BÆ°á»›c 2: PhÃ¢n tÃ­ch cáº¥u trÃºc
- **CÃ³ time keywords** (thÃ¡ng, quÃ½, nÄƒm, ngÃ y) â†’ LINE CHART
- **CÃ³ % vÃ  tá»•ng â‰ˆ 100** â†’ PIE CHART
- **CÃ³ 2 biáº¿n Ä‘á»™c láº­p** â†’ SCATTER PLOT
- **Máº·c Ä‘á»‹nh: So sÃ¡nh items** â†’ BAR CHART

### BÆ°á»›c 3: Kiá»ƒm tra sá»‘ lÆ°á»£ng
- **Pie chart**: Chá»‰ khi 3-6 má»¥c (nhiá»u hÆ¡n sáº½ rá»‘i)
- **Line chart**: Ãt nháº¥t 3 Ä‘iá»ƒm (Ä‘á»ƒ tháº¥y xu hÆ°á»›ng)
- **Bar chart**: Báº¥t ká»³ sá»‘ lÆ°á»£ng nÃ o

### BÆ°á»›c 4: Tá»‘i Æ°u hÃ³a
AI tá»± Ä‘á»™ng:
- Chá»n mÃ u phÃ¹ há»£p
- Äáº·t label rÃµ rÃ ng
- Táº¡o description cho biá»ƒu Ä‘á»“
- Äáº·t biá»ƒu Ä‘á»“ á»Ÿ vá»‹ trÃ­ há»£p lÃ½ trong document

---

## âœ… VÃ Dá»¤ THá»°C Táº¾

### VÃ­ dá»¥ 1: AI táº¡o 2 biá»ƒu Ä‘á»“ tá»« 1 Ä‘oáº¡n text

**Input:**
```
BÃ¡o cÃ¡o kinh doanh Q4/2024

Doanh thu cÃ¡c thÃ¡ng:
- ThÃ¡ng 10: 500 triá»‡u
- ThÃ¡ng 11: 650 triá»‡u
- ThÃ¡ng 12: 720 triá»‡u

PhÃ¢n tÃ­ch cÆ¡ cáº¥u doanh thu:
- Sáº£n pháº©m A chiáº¿m 45%
- Sáº£n pháº©m B chiáº¿m 30%
- Sáº£n pháº©m C chiáº¿m 25%
```

**Output AI tá»± táº¡o:**
1. ğŸ“ˆ **LINE CHART**: Doanh thu theo thÃ¡ng (vÃ¬ cÃ³ time series)
2. ğŸ¥§ **PIE CHART**: CÆ¡ cáº¥u sáº£n pháº©m (vÃ¬ cÃ³ % vÃ  tá»•ng = 100%)

---

### VÃ­ dá»¥ 2: AI KHÃ”NG táº¡o biá»ƒu Ä‘á»“

**Input:**
```
Python lÃ  ngÃ´n ngá»¯ láº­p trÃ¬nh phá»• biáº¿n.

Æ¯u Ä‘iá»ƒm:
- Dá»… há»c
- Cá»™ng Ä‘á»“ng lá»›n
- Nhiá»u thÆ° viá»‡n

Káº¿t luáº­n: Python ráº¥t tá»‘t cho ngÆ°á»i má»›i báº¯t Ä‘áº§u.
```

**Output:** Chá»‰ cÃ³ vÄƒn báº£n Ä‘á»‹nh dáº¡ng Ä‘áº¹p, KHÃ”NG cÃ³ biá»ƒu Ä‘á»“

**Táº¡i sao?** KhÃ´ng cÃ³ sá»‘ liá»‡u cá»¥ thá»ƒ â†’ khÃ´ng cáº§n biá»ƒu Ä‘á»“

---

## ğŸ¨ TUá»² CHá»ˆNH (NÃ¢ng cao)

Náº¿u muá»‘n kiá»ƒm soÃ¡t mÃ u sáº¯c hoáº·c style, edit file:
```
backend/app/services/document_service.py
â†’ Method: _create_chart()
```

**TÃ¹y chá»‰nh mÃ u:**
```python
# Default colors
colors = data.get("colors", [
    "#3498db",  # Blue
    "#2ecc71",  # Green  
    "#e74c3c",  # Red
    "#f39c12",  # Orange
    "#9b59b6"   # Purple
])
```

**TÃ¹y chá»‰nh resolution:**
```python
plt.savefig(img_stream, format='png', dpi=200)  # 150-300 recommended
```

---

## ğŸš€ CÃCH Sá»¬ Dá»¤NG

### Giao diá»‡n Web
1. Má»Ÿ: http://localhost:5174/data-visualization
2. Nháº­p text cÃ³ sá»‘ liá»‡u
3. Click "Táº¡o Biá»ƒu Ä‘á»“"
4. AI tá»± Ä‘á»™ng:
   - PhÃ¢n tÃ­ch dá»¯ liá»‡u
   - Chá»n loáº¡i biá»ƒu Ä‘á»“ phÃ¹ há»£p
   - Táº¡o biá»ƒu Ä‘á»“ Ä‘áº¹p
   - Embed vÃ o Word document

### API Endpoint
```bash
POST /api/v1/documents/generate-visualization
FormData:
  - text_input: "Doanh thu Q1: 100, Q2: 150, Q3: 200"
  - language: "vi"
  - provider: "gemini"

Response: .docx file vá»›i biá»ƒu Ä‘á»“ tá»± Ä‘á»™ng
```

---

## ğŸ“š TÃ“M Táº®T

âœ… **Báº¡n KHÃ”NG Cáº¦N chá»n** - AI lÃ m tá»± Ä‘á»™ng  
âœ… **Chá»‰ cáº§n nháº­p dá»¯ liá»‡u** - AI phÃ¢n tÃ­ch vÃ  chá»n biá»ƒu Ä‘á»“ tá»‘i Æ°u  
âœ… **4 loáº¡i biá»ƒu Ä‘á»“** Ä‘Æ°á»£c há»— trá»£: bar, line, pie, scatter  
âœ… **Logic thÃ´ng minh** dá»±a trÃªn báº£n cháº¥t dá»¯ liá»‡u  
âœ… **Cháº¥t lÆ°á»£ng cao** - matplotlib @ 200 DPI  

---

**ğŸ’¡ Máº¹o pro:** Cung cáº¥p dá»¯ liá»‡u rÃµ rÃ ng â†’ AI chá»n biá»ƒu Ä‘á»“ chÃ­nh xÃ¡c hÆ¡n!

**ğŸ”¥ Technology:** Gemini AI + matplotlib + python-docx  
**ğŸ“… Cáº­p nháº­t:** 23/12/2024
