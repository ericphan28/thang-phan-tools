# ================================
# Utility Server - Environment Variables
# ================================

# Application
APP_NAME="Utility Server API"
APP_VERSION="1.0.0"
API_PREFIX="/api"
ENVIRONMENT="development"
DEBUG=true

# Server
HOST="0.0.0.0"
PORT=8000
WORKERS=4

# Database
DATABASE_URL="sqlite:///./utility.db"

# Redis (optional)
REDIS_URL="redis://localhost:6379/0"

# Security
SECRET_KEY="your-secret-key-change-this-in-production"
JWT_SECRET_KEY="jwt-secret-key-change-this-in-production"
JWT_ALGORITHM="HS256"
ACCESS_TOKEN_EXPIRE_MINUTES=1440

# CORS Origins (comma-separated)
# CORS_ORIGINS="http://localhost:3000,http://localhost:5173"

# File Upload
MAX_UPLOAD_SIZE=52428800  # 50MB
UPLOAD_DIR="./uploads"
TEMP_DIR="./temp"

# ================================
# Adobe PDF Services API
# ================================
# Get credentials from: https://developer.adobe.com/document-services/apis/pdf-services/
USE_ADOBE_PDF_API=false
PDF_SERVICES_CLIENT_ID=""
PDF_SERVICES_CLIENT_SECRET=""
ADOBE_ORG_ID=""

# ================================
# Technology Priority Settings
# ================================
# Format: "technology1,technology2" (comma-separated, first = highest priority)
# The system will try each technology in order until one succeeds
# 
# Available technologies:
#   - adobe: Adobe PDF Services API (10/10 quality, cloud-based, 500 free/month)
#   - pypdf: pypdf library (7/10 quality, local, unlimited, free)
#   - reportlab: ReportLab library (8/10 quality, local, unlimited, free)

# Compress PDF Priority
# Default: "adobe,pypdf" (Try Adobe AI compression first, fallback to pypdf)
COMPRESS_PRIORITY="adobe,pypdf"

# Watermark Priority
# Default: "adobe,pypdf" (Try Adobe watermark first, fallback to reportlab+pypdf)
WATERMARK_PRIORITY="adobe,pypdf"

# PDF Info/Properties Priority
# Default: "adobe,pypdf" (Try Adobe rich metadata first, fallback to pypdf basic)
PDF_INFO_PRIORITY="adobe,pypdf"

# ================================
# Adobe-Only Operations (No fallback available)
# ================================
# These operations REQUIRE Adobe API and have no local fallback:
#   - OCR PDF: Convert scanned PDF to searchable text (supports Vietnamese)
#   - Extract Content: AI-powered extraction of tables, images, fonts
#   - HTML to PDF: Convert HTML/URLs to PDF
# 
# If USE_ADOBE_PDF_API=false, these operations will return error 400

# ================================
# Rate Limiting
# ================================
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# ================================
# OCR Settings (Text Recognition)
# ================================
OCR_LANGUAGES="eng+vie"
# TESSERACT_CMD="/usr/bin/tesseract"  # Optional: custom tesseract path

# OCR Provider Priority (comma-separated, first = highest priority)
# Available providers:
#   - tesseract: Tesseract OCR (7/10 quality, FREE, unlimited, offline, 100+ languages)
#                Requires: choco install tesseract OR manual install
#   - adobe:     Adobe PDF Services (10/10 quality, AI-powered, 500 transactions/month)
#                Requires: Adobe credentials configured above
#
# Recommended configurations:
#   "tesseract,adobe" = FREE first (saves Adobe quota), premium fallback
#   "adobe,tesseract" = BEST QUALITY first, free fallback
#
# Default: "tesseract,adobe" (Use free Tesseract, Adobe as backup)
OCR_PRIORITY="tesseract,adobe"

# ================================
# Monitoring (optional)
# ================================
ENABLE_METRICS=true
ENABLE_SENTRY=false
# SENTRY_DSN=""

# ================================
# Email Settings (optional)
# ================================
# SMTP_HOST="smtp.gmail.com"
# SMTP_PORT=587
# SMTP_USER=""
# SMTP_PASSWORD=""
# EMAIL_FROM=""

# ================================
# Example Configurations
# ================================

# Configuration 1: Adobe Priority (Recommended for best quality)
# USE_ADOBE_PDF_API=true
# COMPRESS_PRIORITY="adobe,pypdf"
# WATERMARK_PRIORITY="adobe,pypdf"
# PDF_INFO_PRIORITY="adobe,pypdf"

# Configuration 2: Local-Only (No Adobe, unlimited free)
# USE_ADOBE_PDF_API=false
# COMPRESS_PRIORITY="pypdf"
# WATERMARK_PRIORITY="pypdf"
# PDF_INFO_PRIORITY="pypdf"

# Configuration 3: pypdf Priority with Adobe Fallback (Save quota)
# USE_ADOBE_PDF_API=true
# COMPRESS_PRIORITY="pypdf,adobe"  # Try pypdf first, use Adobe only if pypdf fails
# WATERMARK_PRIORITY="pypdf,adobe"
# PDF_INFO_PRIORITY="pypdf,adobe"

# Configuration 4: Hybrid Strategy (Best balance)
# USE_ADOBE_PDF_API=true
# COMPRESS_PRIORITY="adobe,pypdf"      # Adobe for quality-critical compression
# WATERMARK_PRIORITY="pypdf"           # pypdf sufficient for watermarks
# PDF_INFO_PRIORITY="pypdf,adobe"      # pypdf faster for basic info
